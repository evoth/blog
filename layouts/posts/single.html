{{ define "main" }}
    <div class="mb-6 lg:p-8 md:p-6 p-4 relative before:absolute before:left-0 before:right-0 before:top-0 before:bottom-0 {{ with .Resources.GetMatch "hero" }}before:bg-[url('{{ .RelPermalink }}')] before:bg-cover before:bg-center before:opacity-30{{ else }}before:bg-zinc-200 before:dark:bg-zinc-800{{ end }} before:-z-10 before:rounded-xl">
        <h1 class="md:mb-4 mb-2">{{ .Title }}</h1>
        {{ if (and (and .Params.concepts (.Scratch.Get "conceptShortcodes")) (ne (len (complement (.Scratch.Get "conceptShortcodes") .Params.concepts)) 0)) }}
            {{ errorf `Page "%s" contains concept terms that are not used in concept shortcodes.` .Page.Title }}
        {{ end }}
        <p><strong>Created:</strong> {{ .Date }}</p>
        <p><strong>Published:</strong> {{ .PublishDate }}</p>
        <p><strong>Updated:</strong> {{ .Lastmod }}</p>
        {{ with (index (.GetTerms "projects") 0 ) }}
            <p><strong>Project:</strong> {{ partial "term-link.html" . }}</p>
        {{ end }}
        {{ with (index (.GetTerms "series") 0 ) }}
            <p><strong>Series:</strong> {{ partial "term-link.html" . }}</p>
        {{ end }}
        {{ with (.GetTerms "tags") }}
            <p><strong>Tags:</strong> {{ delimit (apply . "partial" "term-link.html" ".") ", " }}</p>
        {{ end }}
        {{ with (.GetTerms "concepts") }}
            <p><strong>Concepts:</strong> {{ delimit (apply . "partial" "term-link.html" ".") ", " }}</p>
        {{ end }}
        {{ with (.Scratch.Get "conceptShortcodes") }}
            <p><strong>conceptShortcodes:</strong> {{ . }}</p>
        {{ end }}
        {{ with (.Scratch.Get "references") }}
            <p><strong>references:</strong> {{ . }}</p>
        {{ end }}
    </div>
    <div class="prose prose-zinc dark:prose-invert prose-headings:mb-3 prose-h2:md:text-3xl max-w-none">
        {{ .Content }}
    </div>
{{ end }}
